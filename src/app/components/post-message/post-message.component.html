<div *ngIf="user$ | async as user" class="flex flex-row margin-y-5">
  <div class="flex justify-center margin-x-6">
    <app-profile-badge [pic]="user.pic" [userId]="user.id"> </app-profile-badge>
  </div>
  <div class="flex flex-col w-full pad-right-11 margin-bot-10">
    <form [formGroup]="newMessageForm" (ngSubmit)="addMessage(user)">
      <mat-form-field appearance="fill" class="text-field w-full">
        <textarea
          class="text-field"
          matInput
          placeholder="{{ placeholder }}"
          formControlName="message"
        ></textarea>
        <span class="font-gray"
          >{{
            newMessageForm.value.message
              ? newMessageForm.value.message.length
              : 0
          }}/280</span
        >
      </mat-form-field>
      <div>
        <button
          type="submit"
          [disabled]="
            !newMessageForm.valid ||
            (newMessageForm.value.message &&
              newMessageForm.value.message.length == 0)
          "
          class="w-full"
          mat-flat-button
        >
          Post
        </button>
      </div>
    </form>
  </div>
</div>
